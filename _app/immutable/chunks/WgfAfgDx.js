import{ak as u,al as S,l as y,Q as k,ac as x,R as b,v as i,L as o,am as C,an as E}from"./DpCVmHgD.js";function V(e,r,a=r){var d=new WeakSet;u(e,"input",async c=>{var v=c?e.defaultValue:e.value;if(v=_(e)?t(v):v,a(v),o!==null&&d.add(o),await S(),v!==(v=r())){var f=e.selectionStart,n=e.selectionEnd;e.value=v??"",n!==null&&(e.selectionStart=f,e.selectionEnd=Math.min(n,e.value.length))}}),(i&&e.defaultValue!==e.value||y(r)==null&&e.value)&&(a(_(e)?t(e.value):e.value),o!==null&&d.add(o)),k(()=>{var c=r();if(e===document.activeElement){var v=C??o;if(d.has(v))return}_(e)&&c===t(e.value)||e.type==="date"&&!c&&!e.value||c!==e.value&&(e.value=c??"")})}const h=new Set;function q(e,r,a,d,c=d){var v=a.getAttribute("type")==="checkbox",f=e;let n=!1;if(r!==null)for(var g of r)f=f[g]??=[];f.push(a),u(a,"change",()=>{var l=a.__value;v&&(l=m(f,l,a.checked)),c(l)},()=>c(v?[]:null)),k(()=>{var l=d();if(i&&a.defaultChecked!==a.checked){n=!0;return}v?(l=l||[],a.checked=l.includes(a.__value)):a.checked=E(a.__value,l)}),x(()=>{var l=f.indexOf(a);l!==-1&&f.splice(l,1)}),h.has(f)||(h.add(f),b(()=>{f.sort((l,s)=>l.compareDocumentPosition(s)===4?-1:1),h.delete(f)})),b(()=>{if(n){var l;if(v)l=m(f,l,a.checked);else{var s=f.find(w=>w.checked);l=s?.__value}c(l)}})}function B(e,r,a=r){u(e,"change",d=>{var c=d?e.defaultChecked:e.checked;a(c)}),(i&&e.defaultChecked!==e.checked||y(r)==null)&&a(e.checked),k(()=>{var d=r();e.checked=!!d})}function m(e,r,a){for(var d=new Set,c=0;c<e.length;c+=1)e[c].checked&&d.add(e[c].__value);return a||d.delete(r),Array.from(d)}function _(e){var r=e.type;return r==="number"||r==="range"}function t(e){return e===""?null:+e}export{q as a,B as b,V as c};
